This is a hard integration error ğŸ‘‡
â€œAuthentication key mismatchâ€ is 100% merchant-side config.

Let me break it down cleanly.

ğŸ”´ Root cause (very clear)

Authentication key mismatch

That means:

ğŸ‘‰ ivp_store = 32400
ğŸ‘‰ ivp_authkey = ************

âŒ That auth key does NOT belong to store 32400
OR
âŒ Youâ€™re mixing sandbox vs live credentials

Telr immediately rejects the request before fraud checks even run.

Why Apple Pay â€œworkedâ€ but cards didnâ€™t

This part is confusing but logical once you see it:

Apple Pay

Often uses a different flow

Sometimes routed through mobile SDK / tokenized request

May still succeed if:

Apple Pay key is correct

Card payment key is wrong

Credit Card payment page

Uses ivp_store + ivp_authkey strictly

Any mismatch = instant failure

So this was never IP-related â€” the IP showing/not showing was just coincidence timing-wise.

ğŸš¨ Smoking guns in your log
1ï¸âƒ£ ivp_trantype -- not set --

This must be set.

Valid values:

sale

auth

Missing this alone can break payments.

2ï¸âƒ£ ivp_test 0

This means LIVE mode.

If even ONE of these is sandbox:

authkey

store ID

endpoint URL

â†’ authentication mismatch.

3ï¸âƒ£ User Agent = node

This tells me:

You recently updated backend / server code

Keys likely changed, env vars swapped, or overwritten

Very common after â€œlatest updateâ€.

âœ… What to fix (in order)
âœ… Step 1 â€” Verify credentials (MOST IMPORTANT)

Log into Telr Merchant Dashboard â†’ Settings â†’ Integration

Confirm:

Store ID = 32400

Auth Key = exact match (no spaces, no old key)

âš ï¸ If you regenerated the auth key â†’ old one is DEAD.

âœ… Step 2 â€” Make sure environment matches

You must have one clean set:

LIVE

ivp_test = 0

Live Store ID

Live Auth Key

Live endpoint

SANDBOX

ivp_test = 1

Sandbox Store ID

Sandbox Auth Key

Sandbox endpoint

âŒ Never mix.

âœ… Step 3 â€” Set ivp_trantype

Add this now:

ivp_trantype = sale


This is mandatory.

âœ… Step 4 â€” IP is NOT the problem

Your IP:

34.96.46.67


This is a Google Cloud / server IP â€” Telr accepts these fine.

Fraud rules were never reached because auth failed first.

Why it broke â€œafter latest updateâ€

Classic scenario:

.env file changed

Keys copied from wrong merchant

Apple Pay config left untouched

Card flow using wrong key

Iâ€™ve seen this exact thing dozens of times.